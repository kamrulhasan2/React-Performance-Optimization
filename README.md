# Resources:
https://react.dev/reference/dev-tools/react-performance-tracks

# React Performance Optimization: ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд ржЖрж▓рзЛржЪржирж╛

React ржжрж┐рзЯрзЗ ржмрж╛ржирж╛ржирзЛ ржУрзЯрзЗржм ржЕрзНржпрж╛ржк ржпржжрж┐ ржзрзАрж░ржЧрждрж┐ рж╣рзЯ, рждржмрзЗ ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА ржмрж┐рж░ржХрзНржд рж╣рзЯрзЗ ржпрж╛рзЯ ржПржмржВ ржЕрзНржпрж╛ржк ржерзЗржХрзЗ ржмрзЗрж░рж┐рзЯрзЗ ржпрзЗрждрзЗ ржкрж╛рж░рзЗред рждрж╛ржЗ **React Performance Optimization** ржЦрзБржмржЗ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржгред ржПржЦрж╛ржирзЗ ржЖржорж░рж╛ ржзрж╛ржкрзЗ ржзрж╛ржкрзЗ рж╕ржмржХрж┐ржЫрзБ ржЖрж▓рзЛржЪржирж╛ ржХрж░ржмрзЛ, рж╕рж╛ржерзЗ **ржХрзЛржб ржЙржжрж╛рж╣рж░ржг** ржжрж┐ржмред

---

## 1. ржХрзЗржи ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕ ржЕржкрзНржЯрж┐ржорж╛ржЗржЬрзЗрж╢ржи ржжрж░ржХрж╛рж░?

- **ржзрзАрж░ рж▓рзЛржб ржЯрж╛ржЗржо (Slow Loading):** ржпрзЗржоржи ржПржХржЯрж┐ ржЗ-ржХржорж╛рж░рзНрж╕ рж╕рж╛ржЗржЯрзЗ ржЫржмрж┐, ржкрзНрж░рзЛржбрж╛ржХрзНржЯрзЗрж░ ржжрж╛ржо ржмрж╛ рж╢рж┐рж░рзЛржирж╛ржо ржЖрж╕рждрзЗ ржжрзЗрж░рж┐ рж╣рж▓рзЗ ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА ржЪрж▓рзЗ ржпрж╛рзЯред
- **ржЕржкрзНрж░рзЯрзЛржЬржирзАрзЯ Re-render:** props ржмрж╛ state ржЕрж▓рзНржк ржкрж░рж┐ржмрж░рзНрждржи рж╣рж▓рзЗржУ ржкрзБрж░рзЛ component tree рж░рзЗржирзНржбрж╛рж░ рж╣рзЯред
- **ржнрж╛рж░рзА ржЧржгржирж╛ (Expensive Computation):** ржмрзЬ рж▓рж┐рж╕рзНржЯ, ржЬржЯрж┐рж▓ рж▓рзБржк, ржмрж╛ ржмрзЬ ржбрзЗржЯрж╛ ржкрзНрж░рж╕рзЗрж╕ ржХрж░рж▓рзЗ ржмрзНрж░рж╛ржЙржЬрж╛рж░ рж╕рзНрж▓рзЛ рж╣рзЯрзЗ ржпрж╛рзЯред

ЁЯСЙ ржЙржжрж╛рж╣рж░ржг:

```jsx
function ProductList({ products }) {
  return (
    <ul>
      {products.map(p => (
        <li key={p.id}>{p.name}</li>
      ))}
    </ul>
  );
}

```

ржпржжрж┐ `products` рж▓рж┐рж╕рзНржЯрзЗ рж╣рж╛ржЬрж╛рж░ рж╣рж╛ржЬрж╛рж░ ржЖржЗржЯрзЗржо ржерж╛ржХрзЗ, ржкрзБрж░рзЛ DOM ржПржХрж╕рж╛ржерзЗ рж░рзЗржирзНржбрж╛рж░ рж╣ржмрзЗ, ржлрж▓рзЗ ржЕрзНржпрж╛ржк ржЦрзБржм ржзрзАрж░ рж╣рзЯрзЗ ржпрж╛ржмрзЗред

---

## 2. Rendering ржЕржкрзНржЯрж┐ржорж╛ржЗржЬрзЗрж╢ржи

### (ржХ) `React.memo()` ржмрзНржпржмрж╣рж╛рж░

ржПржХржЯрж┐ ржХржорзНржкрзЛржирзЗржирзНржЯ ржПржХржЗ props ржкрзЗрж▓рзЗ ржЕржкрзНрж░рзЯрзЛржЬржирзАрзЯржнрж╛ржмрзЗ ржЖржмрж╛рж░ рж░рзЗржирзНржбрж╛рж░ рж╣ржУрзЯрж╛ ржПрзЬрж╛рждрзЗ `React.memo()` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯред

```jsx
const UserProfile = React.memo(function UserProfile({ name }) {
  console.log("Rendered:", name);
  return <h2>{name}</h2>;
});

```

тЮбя╕П ржПржЦржи parent re-render рж╣рж▓рзЗржУ `name` ржирж╛ ржмржжрж▓рж╛рж▓рзЗ `UserProfile` ржЖржмрж╛рж░ render рж╣ржмрзЗ ржирж╛ред

---

### (ржЦ) `useMemo()` ржмрзНржпржмрж╣рж╛рж░

ржмрзНржпрзЯржмрж╣рзБрж▓ ржХрзНржпрж╛рж▓ржХрзБрж▓рзЗрж╢ржи ржкрзНрж░рждрж┐ржмрж╛рж░ ржирж╛ ржХрж░рзЗ ржорзЗржорзЛрж░рж╛ржЗржЬ ржХрж░рзЗ рж░рж╛ржЦрж╛ рж╣рзЯред

```jsx
function ExpensiveList({ items }) {
  const sortedItems = useMemo(() => {
    console.log("Sorting...");
    return items.sort((a, b) => a - b);
  }, [items]);

  return <ul>{sortedItems.map(i => <li key={i}>{i}</li>)}</ul>;
}

```

тЮбя╕П ржПржЦрж╛ржирзЗ `items` ржирж╛ ржмржжрж▓рж╛рж▓рзЗ sort ржЖржмрж╛рж░ рж╣ржмрзЗ ржирж╛ред

---

### (ржЧ) Virtualization (Infinite Scroll)

ржмрзЬ рж▓рж┐рж╕рзНржЯрзЗрж░ рж╕ржм ржбрзЗржЯрж╛ ржПржХрж╕рж╛ржерзЗ ржирж╛ ржжрзЗржЦрж┐рзЯрзЗ ржЖржВрж╢рж┐ржХ ржжрзЗржЦрж╛ржирзЛред

ЁЯСЙ рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐: **react-window**, **react-virtualized**

```jsx
import { FixedSizeList as List } from "react-window";

function BigList({ items }) {
  return (
    <Listheight={300}
      itemCount={items.length}
      itemSize={35}
      width={300}
    >
      {({ index, style }) => <div style={style}>{items[index]}</div>}
    </List>
  );
}

```

тЮбя╕П ржПржЦрж╛ржирзЗ ржПржХрж╕рж╛ржерзЗ рж╢рзБржзрзБ ржжрзГрж╢рзНржпржорж╛ржи ржЖржЗржЯрзЗржоржЧрзБрж▓рзЛ рж░рзЗржирзНржбрж╛рж░ рж╣ржмрзЗ, рж╣рж╛ржЬрж╛рж░ рж╣рж╛ржЬрж╛рж░ рж╣рж▓рзЗржУ ржЕрзНржпрж╛ржк рж╕рзНржорзБрже ржЪрж▓ржмрзЗред

---

## 3. Effect ржЕржкрзНржЯрж┐ржорж╛ржЗржЬрзЗрж╢ржи (`useEffect`)

### ржЕржкрзНрж░рзЯрзЛржЬржирзАрзЯ Effect ржПрзЬрж╛ржирзЛ

ржЕржирзЗржХ рж╕ржорзЯ ржЖржорж░рж╛ state ржПрж░ ржЫрзЛржЯржЦрж╛ржЯрзЛ ржкрж░рж┐ржмрж░рзНрждржирзЗ `useEffect` рж▓рж┐ржЦрзЗ ржлрзЗрж▓рж┐, ржпрж╛ ржжрж░ржХрж╛рж░ рж╣рзЯ ржирж╛ред

тЭМ ржЦрж╛рж░рж╛ржк ржЙржжрж╛рж╣рж░ржг:

```jsx
useEffect(() => {
  setFullName(firstName + " " + lastName);
}, [firstName, lastName]);

```

тЬЕ ржнрж╛рж▓рзЛ ржЙржжрж╛рж╣рж░ржг:

```jsx
const fullName = firstName + " " + lastName;

```

тЮбя╕П ржПржЦрж╛ржирзЗ ржЖрж▓рж╛ржжрж╛ effect ржжрж░ржХрж╛рж░ ржирзЗржЗред

---

### State Reset ржХрж░рж╛рж░ ржЙржжрж╛рж╣рж░ржг

ржзрж░рж╛ ржпрж╛ржХ ржПржХржЯрж┐ ржкрзНрж░рзЛржлрж╛ржЗрж▓ ржкрзЗржЬ ржЖржЫрзЗ ржпрзЗржЦрж╛ржирзЗ `userId` ржкрж░рж┐ржмрж░рзНрждржи рж╣рж▓рзЗ ржХржорзЗржирзНржЯ ржлрж┐рж▓рзНржб reset рж╣ржУрзЯрж╛ ржжрж░ржХрж╛рж░ред

```jsx
function Profile({ userId }) {
  const [comment, setComment] = useState("");

  useEffect(() => {
    setComment("");  // user ржкрж░рж┐ржмрж░рзНрждржи рж╣рж▓рзЗ comment reset
  }, [userId]);

  return <input value={comment} onChange={e => setComment(e.target.value)} />;
}

```

---

## 4. рж▓рзЛржбрж┐ржВ ржЯрж╛ржЗржо ржЕржкрзНржЯрж┐ржорж╛ржЗржЬрзЗрж╢ржи

### (ржХ) ржЗржорзЗржЬ ржЕржкрзНржЯрж┐ржорж╛ржЗржЬрзЗрж╢ржи

- ржЫржмрж┐ `lazy loading` ржХрж░рж╛
- JPG тЖТ WebP ржХржиржнрж╛рж░рзНржЯ ржХрж░рж╛
- ржХржоржкрзНрж░рзЗрж╕ржб ржЫржмрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛

```html
<img src="product.webp" loading="lazy" alt="product" />

```

---

### (ржЦ) Code Splitting (Dynamic Import)

ржкрзБрж░рзЛ ржЕрзНржпрж╛ржк ржПржХржмрж╛рж░рзЗ ржирж╛ рж▓рзЛржб ржХрж░рзЗ ржкрзНрж░рзЯрзЗрж╛ржЬржи ржЕржирзБржпрж╛рзЯрзА рж▓рзЛржб ржХрж░рж╛ред

```jsx
const LazyComponent = React.lazy(() => import("./BigComponent"));

function App() {
  return (
    <React.Suspense fallback={<div>Loading...</div>}>
      <LazyComponent />
    </React.Suspense>
  );
}

```

---

### (ржЧ) Production Build

Development build ржПрж░ ржкрж░рж┐ржмрж░рзНрждрзЗ `npm run build` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж▓рзЗ bundle ржЫрзЛржЯ рж╣рзЯ, performance ржнрж╛рж▓рзЛ рж╣рзЯред

---

## 5. Performance Measurement Tools

### (ржХ) React Profiler

React DevTools ржжрж┐рзЯрзЗ ржХрзЛржи ржХржорзНржкрзЛржирзЗржирзНржЯ ржХрждржмрж╛рж░ render рж╣ржЪрзНржЫрзЗ рждрж╛ ржжрзЗржЦрж╛ ржпрж╛рзЯред

### (ржЦ) Chrome Lighthouse

- **FCP (First Contentful Paint)** тАУ ржкрзНрж░ржержо ржХржиржЯрзЗржирзНржЯ ржжрзЗржЦрж╛рждрзЗ ржХржд рж╕ржорзЯ рж▓рж╛ржЧржЫрзЗ
- **TTI (Time to Interactive)** тАУ ржЕрзНржпрж╛ржк ржкрзБрж░рзЛржкрзБрж░рж┐ interactive рж╣рждрзЗ ржХржд рж╕ржорзЯ рж▓рж╛ржЧржЫрзЗ

### (ржЧ) Network Throttling

Slow 3G/4G ржП ржЯрзЗрж╕рзНржЯ ржХрж░рзЗ ржжрзЗржЦрж╛ ржпрж╛рзЯ ржЕрзНржпрж╛ржк ржЖрж╕рж▓ ржЗржЙржЬрж╛рж░рзЗрж░ ржХрж╛ржЫрзЗ ржХрзЗржоржи ржкрж╛рж░ржлрж░рзНржо ржХрж░ржЫрзЗред

---

## 6. Best Practices

- Unnecessary renders ржПрзЬрж┐рзЯрзЗ ржЪрж▓рж╛
- State ржХрзЗ ржЫрзЛржЯ ржЫрзЛржЯ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗ ржнрж╛ржЧ ржХрж░рж╛
- Keys рж╕ржарж┐ржХржнрж╛ржмрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ (`key` ржЫрж╛рзЬрж╛ list render ржирж╛ ржХрж░рж╛)
- Production build ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛
- Lazy loading + Code splitting ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛
- Large data ржПрж░ ржХрзНрж╖рзЗрждрзНрж░рзЗ Virtualization

---

## 7. ржЙржкрж╕ржВрж╣рж╛рж░

React Performance Optimization ржХрзЛржиржУ **ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржирж┐рзЯржо ржирзЯ**, ржмрж░ржВ ржкрж░рж┐рж╕рзНржерж┐рждрж┐ ржЕржирзБржпрж╛рзЯрзА **ржмрж┐ржнрж┐ржирзНржи ржХрзМрж╢рж▓рзЗрж░ рж╕ржоржирзНржмрзЯ**ред

ЁЯСЙ ржорзВрж▓ рж▓ржХрзНрж╖рзНржп рж╣рж▓рзЛ:

1. **рж▓рзЛржбрж┐ржВ ржжрзНрж░рзБржд ржХрж░рж╛**
2. **ржЕржкрзНрж░рзЯрзЛржЬржирзАрзЯ рж░рзЗржирзНржбрж╛рж░ ржПрзЬрж╛ржирзЛ**
3. **ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАрж░ ржЕржнрж┐ржЬрзНржЮрждрж╛ ржорж╕рзГржг ржХрж░рж╛**

---

тЬи ржПржХ ржХржерж╛рзЯ:

- ржЫрзЛржЯ ржЕрзНржпрж╛ржкрзЗрж░ ржЬржирзНржп рж╕рж╛ржзрж╛рж░ржг optimization (memo, lazy load) ржпржерзЗрж╖рзНржЯред
- ржмрзЬ рж╕рзНржХрзЗрж▓рзЗрж░ ржкрзНрж░рзЛржЬрзЗржХрзНржЯрзЗ **virtualization, code splitting, profiling** ржЕржкрж░рж┐рж╣рж╛рж░рзНржпред
